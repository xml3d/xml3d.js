<?xml version="1.0" encoding="UTF-8"?>
 <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <link rel="stylesheet" type="text/css" media="all" href="frame.css"/>
    <script type="text/javascript" src="../../build/output/xml3d.js"></script>
   <title>
    XML3D
   </title>
  </head>
  <body style="background-color: #FFF;width:500px">
   <xml3d activeView="#defaultView" id="xml3DElem" style="background-color: grey; width: 200px; height: 200px;" xmlns="http://www.xml3d.org/2009/xml3d">
    <defs>   

    <shader id="diffuseShader" script="urn:xml3d:shader:diffuse">
        <float3 name="diffuseColor">1 1 1</float3>
        <float3 name="emissiveColor">0 1 0</float3>
    </shader> 
    <shader id="phongShader" script="urn:xml3d:shader:phong">
        <float3 name="diffuseColor">1 1 1</float3>
    </shader> 
    
    <data id="meshdata" type="triangles">
        <int name="index">0 1 2 1 2 3</int>
        <float3 name="position">-1.0 -1.0 0.0 1.0 -1.0 0.0 -1.0 1.0 0.0 1.0 1.0 0.0</float3>
        <float3 name="normal">0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0 0.0 0.0 1.0</float3>
        <float2 name="texcoord">0.0 1.0 1.0 1.0 0.0 0.0 1.0 0.0</float2>
    </data>
    
    <data id="wrapMeshData" type="triangles">
        <data src="#meshdata"/>
        <float2 name="texcoord">0.0 2.0 2.0 2.0 0.0 0.0 2.0 0.0</float2>
    </data>
    
    <data id="coloredmeshdata" type="triangles">
        <data src="#meshdata"/>
        <float3 name="color">0.0 0.0 1.0 0.0 1.0 0.0 1.0 0.0 0.0 1.0 1.0 0.0</float3>
    </data>
    
    <lightshader id="ls_Point" script="urn:xml3d:lightshader:point">
       <float3 name="intensity" id="pointIntensity">
        10 0 0
       </float3>
       <float3 name="attenuation">
       1 0 0
       </float3>
    </lightshader>
    
    <lightshader id="ls_Point2" script="urn:xml3d:lightshader:point">
       <float3 name="intensity">
        0 0 10
       </float3>
       <float3 name="attenuation">
       1 0 0
       </float3>
    </lightshader>
    
    <lightshader id="ls_Dir" script="urn:xml3d:lightshader:directional">
       <float3 id="lsdIntensity" name="intensity">
        0 0 10
       </float3>
    </lightshader>
    
    <lightshader id="ls_Spot" script="urn:xml3d:lightshader:spot">
       <float3 id="lsIntensity" name="intensity">
        0 10 0
       </float3>
    </lightshader>
    
    <transform id="t_Point" translation="0 0 3"/>
    <transform id="t_dirLight" rotation="0 0 1 0"/>
    <transform id="t_Spot" translation="0 0 3" rotation="0 0 1 0"/>
      
    </defs>
    
    <view id="defaultView" position="0 0 3"/>
    
    <group transform="#t_Point" id="pointlight">
      <light shader="#ls_Point" id="pointlightLight"/>
    </group>
    <group id="dirlight" transform="#t_dirLight">
      <light id="dirlightelement" shader="#ls_Dir"/>
    </group>
    
    <group transform="#t_Point" id="pointlight2">
    
    </group>
    <group transform="#t_Spot" id="spotlight">
    
    </group>
    
    <group id="diffuseShadedGroup" shader="#diffuseShader" visible="false">
	    <mesh id="mySimpleMesh" src="#meshdata" type="triangles">
	    </mesh>
    </group>  
    <group id="phongShadedGroup" shader="#phongShader" visible="false">
        <mesh id="mySimpleMesh2" src="#meshdata" type="triangles">
        </mesh>
    </group> 

    </xml3d>
    <script type="text/javascript">
    function getPixelValue(canvas, x,y) {
        var pixels = new Uint8Array(4), a = new Array(4);
        canvas.readPixels(x, y, 1, 1, WebGLRenderingContext.RGBA, WebGLRenderingContext.UNSIGNED_BYTE, pixels);
        for(var i=0;i&lt;4;i++)
            a[i] = pixels[i];
        return a;
    }
    </script>
  </body>
 </html>
